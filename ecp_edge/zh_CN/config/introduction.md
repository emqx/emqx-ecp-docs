# 配置

本节主要介绍如何在 ECP Edge 中添加南向设备、建立其与 ECP Edge 的通信，并通过北向插件将其连接到云平台或处理引擎等外部应用。

## 关键概念

### [插件 (Plugin)](../intro/plugin-list.md)

插件可以分为北向应用和南向驱动程序。北向插件通常用于连接到云平台或像处理引擎这样的外部应用程序。南向插件是实现特定协议以访问外部设备的通信驱动程序。为了实现协议格式转换，至少需要一个北向插件和一个南向插件分别用于数据传递和数据采集。

所有插件模块都是基于 C 语言编写，并为希望二次开发的用户提供了 SDK 文件。具体的插件开发教程请参考 [SKD 教程](https://neugates.io/docs/zh/latest/dev-guide/sdk-tutorial/sdk-tutorial.html)。

### [数据标签点位 (Tag)](./groups-tags/groups-tags.md)

数据标签点位是分配给一条信息的非分层唯一关键字，其中定义了设备中的数据存储位置和数据操作属性，还包含有关数据的一些元数据信息，如缩放、精确度和读/写属性等。点位信息有助于描述项目，并允许在设备中找到该项目或对其进行处理以自动读取/写入。用户将识别设备中那些感兴趣的点位，以从设备中读取数据或向设备写入数据。

### [组 (Group)](./groups-tags/groups-tags.md)

点位将被分配到组中。每个组都有独立的轮询频率以从设备中读取数据。设备中用户感兴趣的点位集合被分成几个组以便更好地管理。路由机制基于这些组作为信息单元在节点之间进行交换。北向节点可以订阅任何南向节点中的任何组。这些订阅将用于在节点之间路由数据消息。此外，还有一个组轮询频率用于控制设备轮询的时间间隔。

## 配置流程

以下为如何通过设置 ECP Edge 进行各种工业协议转换、进而完成数据传递和采集的工作流程。

1. [查看所有可用插件](../intro/plugin-list.md)：使用各种工业插件可以实现 ECP Edge 的数据采集和传递功能。

2. [创建南向驱动](./south-devices/south-devices.md)：根据工业协议为设备通信选择所有必需的南向插件。每个南向插件根据协议规范只有一个与设备或多个设备总线的连接。根据协议规范，每个南向插件只能与一个设备或关联多个设备的一条消息总线建立连接。

3. [建立设备与 ECP Edge 之间的通信](./groups-tags/groups-tags.md)：首先为南向驱动程序添加组和点位。创建好组和点位，即可从数据监控中获取点位的实时值。为方便用户操作，ECP 支持通过离线 Excel 文件[批量导入](./import-export.md)相关配置信息。

   :::tip

   重复步骤 2 和 3，直到完成所有必要驱动、组和点位的创建。
   :::

4. [创建北向应用并订阅南向设备](./north-apps/north-apps.md)：选择需要的北向插件以实现数据的传送。每个北向插件只能连接到一个目的地，如代理或应用程序。创建北向设备后，还需订阅组。在此步骤中，不需要设置组和点位。北向节点可以订阅在南向节点中创建的任何组。建立订阅后，相应组的数据将按照组的频率持续发布到北向节点。

整体流程如下图所示：

<img src="./_assets/config.png" alt="配置步骤" style="zoom:40%;" />
