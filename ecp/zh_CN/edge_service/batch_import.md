# 导入现有边缘服务

除经由 ECP 批量安装边缘服务外，ECP 还支持[添加一个现有边缘服务](#添加一个现有服务)，或者通过 CSV 文件[批量导入](#批量导入现有服务)现有边缘服务。

## 添加一个现有服务

ECP 支持直连和代理两种模式导入一个边缘服务。

- [直连模式](#直连模式)：ECP 和边缘服务在同一网络或 VPC 的情况。
- [代理模式](#代理模式)：边缘侧有自己的 VPC 或局域网，用户则需要先安装边缘代理，用于实现边缘侧和云端服务的通信。

### 直连模式

1. 以系统/组织/项目管理员的身份登录 ECP。
2. 点击**添加边缘服务**按钮，进入添加边缘服务页面。
3. **添加方式**选择**添加一个现有服务**。
4. **类型**可以选择 eKuiper、Neuron、NanoMQ 或自定义。
5. 连接方式选择**直连**。
6. 输入该边缘服务的名称；1 - 200 个字符，并支持 "-" 和空格。
7. 输入边缘服务的地址，支持 HTTP 和 HTTPS 协议。
8. [可选] 添加标签，方便后续维护。
9. 点击**确认**，保存边缘服务信息；新增的边缘服务被添加到边缘服务列表中。

<img src="./_assets/edge-service-add.png" style="zoom:40%;" align="middle">

 

### 代理模式

如果边缘侧与云端是不同的网络不能直连，需要安装 ECP 自研的 Agent 进行代理。有关如何安装，见[安装 ECP 边缘代理](../install/install_edge_agent)。有关如何使用，见[ECP 边缘代理](./edge_agent_management.md)。

#### 操作步骤

1. 以系统/组织/项目管理员的身份登录 ECP。
2. 点击**添加边缘服务**按钮，进入添加边缘服务页面。
3. **添加方式**选择**添加一个现有服务**。
4. **类型**可以选择 eKuiper、Neuron、NanoMQ 或自定义。
5. 连接方式选择**代理**。
6. 选择 ECP 边缘网关用于建立边缘侧和 ECP 的通信。
7. 输入该边缘服务的名称；1 - 200 个字符，并支持 "-" 和空格。
8. 输入边缘服务的地址，支持 HTTP 和 HTTPS 协议。
9. [可选] 添加标签，方便后续维护。
10. 点击**确认**，保存边缘服务信息；新增的边缘服务被添加到边缘服务列表中。

<img src="./_assets/edge-service2-add.png" style="zoom:40%;" align="middle">

## 批量导入现有服务

ECP 支持通过 CSV 文件批量导入已有的边缘服务：

1. 以系统/组织/项目管理员的身份登录 ECP。
2. 点击**添加边缘服务**按钮，进入添加边缘服务页面。
3. **添加方式**选择**批量导入现有服务**。
4. 导入准备好的 CSV 文件，文件大小不应超过 100 MB。

<img src="./_assets/edge-batch-import.png" style="zoom:40%;" align="middle">

导入完成的边缘服务会自动显示在边缘服务列表中。注意：如果文件中包含无效数据，ECP 将仅导入其中的有效数据，并标记和提示错误格式的数据。

CSV 文件的列名解释如下：

| 列名 | 解释 |
| :------| :---------------|
|category|边缘产品类型|
|name|边缘服务名称[]|
|nodeType|直连/代理|
|endpoint|边缘服务地址|
|scheme|http/https/MQTT|
|agentID|边缘代理 ID，非必填|
|tagName|标签名称，非必填|
|serviceID|边缘服务 ID，非必填|
|username|NanoMQ 验证用户名，非必填|
|password|NanoMQ 验证密码，非必填|

